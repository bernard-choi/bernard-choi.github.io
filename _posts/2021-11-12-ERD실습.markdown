---  
layout: post
title: "[DB] 데이터베이스 정규화 - 논리적 설계 실습해보기"
subtitle: "[DB] 데이터베이스 정규화 - 논리적 설계 실습해보기"  
categories: CS
tags: DataBase InnoDB MySQL
comments: true  
---  

네이버 뉴스 페이지 ERD를 그려보자

## 요구사항정의서

![요구사항정의서1](https://yunsikus.github.io/assets/img/post_img/요구사항정의서1.jpg)

## 카테고리

먼저 카테고리를 살펴보면, 네이버뉴스는 카테고리와 소카테고리로 분류됩니다. 
아래 그림처럼 경제라는 카테고리 안에 금융, 증권, 부동산등의 소카테고리가 있습니다. 

![ERD그리기1](https://yunsikus.github.io/assets/img/post_img/ERD그리기1.jpg)

- 이를 위해 `카테고리 테이블`과 `소카테고리 테이블`을 생성하여 `뉴스 테이블`에 FK로 연결시켜주어야 합니다. `소카테고리 테이블`에 카테고리 정보를 FK로 가져오고 다시 `뉴스 테이블`에서 카테고리번호와 소카테고리번호를 FK를 가져오도록 합니다. 

- 사용 가능한 trick은 `소카테고리 테이블`에서 `카테고리 테이블`을 연결할때 식별자로 연결하는 것입니다. 
  - 이 경우 카테고리번호가 일반 컬럼이 아닌 식별자로 가지고 오게 되는 것인데 이는 다시 `뉴스 테이블`과 연결하기 위함입니다. 
  - `소카테고리 테이블`과 `뉴스 테이블`을 다시 비식별자로 이을 경우 한번의 연결로 충분하지만 만약 `소카테고리 테이블`과 `카테고리 테이블`이 비식별자로 연결되었을 경우 `뉴스 테이블`과 `카테고리 테이블`을 다시 FK로 연결해주어야 합니다. 

![ERD그리기2](https://yunsikus.github.io/assets/img/post_img/ERD그리기2.jpg)

---

## 뉴스

- 회원은 아래 그림처럼 뉴스에 감정표현을 할 수 있습니다. 
![ERD그리기3](https://yunsikus.github.io/assets/img/post_img/ERD그리기3.jpg)

- 또한 회원은 뉴스에 댓글을 남길 수 있습니다. 
- 회원은 댓글에 감정표현을 할 수 있으며 답글을 남길수도 있습니다. 

- 먼저 감정표현 관계는 회원과 뉴스사이의 다대다 관계입니다. 이때 회원은 하나의 뉴스에 하나의 감정표현만 할 수 있으므로 회원번호와 뉴스번호를 식별자 관계로 이어줘야 합니다. (또는 대체키를 두고 회원번호와 뉴스번호를 Unique Key로 설정하는 방법도 있습니다.)

![ERD그리기4](https://yunsikus.github.io/assets/img/post_img/ERD그리기4.jpg)

- 반면 댓글의 경우 같은 다대다 관계이지만, 회원은 뉴스에 여러개의 댓글을 달 수 있습니다. 이 경우 회원번호와 뉴스번호를 비식별자로 이어주면 됩니다. 

---

## 기자

- 회원은 기자를 구독 및 응원할 수 있습니다. 
- 구독과 응원은 회원과 기자 사이의 다대다관계입니다. 
- 회원은 기자를 한번만 구독할 수 있으므로 식별자 관계입니다. 또한 한번만 응원할 수 있으므로 식별자 관계입니다.
  
![ERD그리기6](https://yunsikus.github.io/assets/img/post_img/ERD그리기6.jpg)

---

## 댓글

- 회원은 댓글에 대한 답글 및 댓글 감정표현을 달 수 있고 이는 다대다 관계입니다.
- 회원은 댓글에 대한 감정표현을 하나만 할 수 있습니다. 때문에 회원과 댓글을 식별자 관계로 이어줍니다. 
- 반면 답글의 경우 하나의 회원이 한 댓글에 여러개의 답글을 남길 수 있으므로 비식별자 관계로 이어줍니다. 

![ERD그리기5](https://yunsikus.github.io/assets/img/post_img/ERD그리기5.jpg)

---

## 사진 및 동영상

- 사진 및 동영상은 구분 없이 파일 주소값을 지닙니다.
- 사진 및 동영상 테이블과 뉴스 테이블은 부모 자식 관계. 비식별자로 뉴스번호 PK를 가져옵니다.

![ERD그리기8](https://yunsikus.github.io/assets/img/post_img/ERD그리기8.jpg)

---

## 관련 뉴스

- 각 뉴스는 아래 사진과 같이 관련뉴스를 가지고 있습니다. 
![ERD그리기7](https://yunsikus.github.io/assets/img/post_img/ERD그리기7.jpg)

- 중복되는 관련뉴스를 가지면 안되기 때문에 식별자로 가져옵니다. 뉴스와 관련 뉴스 모두 뉴스테이블에서 FK로 가져옵니다. 

![ERD그리기9](https://yunsikus.github.io/assets/img/post_img/ERD그리기9.jpg)

