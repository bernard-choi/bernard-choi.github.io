---  
layout: post
title: "[Git] reflog로 삭제된 커밋 되돌리기"
subtitle: "[Git] reflog로 삭제된 커밋 되돌리기"  
categories: Development
tags: Git
comments: true  
---  
## 테스트를 위한 파일 생성
테스트를 위해 아래와 같이 파일을 생성함

```python
## test.py
1
2
3
```

한줄씩 추가할때마다 커밋하면 다음과 같은 로그가 남는다. 

![reflog.jpg](https://yunsikus.github.io/assets/img/post_img/reflog1.jpg)

---

## 커밋로그 확인

- `git log --oneline` : 깔끔하게 로그 출력
![reflog2.jpg](https://yunsikus.github.io/assets/img/post_img/reflog2.jpg)

- `git log -n 2` : 최신 2번째 로그까지 출력
![reflog3.jpg](https://yunsikus.github.io/assets/img/post_img/reflog3.jpg)

- `git log --oneline --decorate --graph` : 그래프 형태로 커밋 히스토리 출력

- `git show` : 가장 최신의 커밋 로그 출력
  - `git show HEAD^^` : 가장 최신에서 2번째 떨어진 커밋 로그 출력
  - `git show HEAD~2` : 위와 동일
![reflog4.jpg](https://yunsikus.github.io/assets/img/post_img/reflog4.jpg)

---

## 삭제된 커밋발생

- `git reset -—hard HEAD^` : 이전 커밋으로 리셋
- `git reset --hard HEAD^^` : 이전 이전 커밋으로 리셋
- 이전 커밋으로 reset했을 때 다시 되돌리고 싶지만, `git log`에서는 지워진 커밋로그는 보이지 않는다. 

![reflog5.jpg](https://yunsikus.github.io/assets/img/post_img/reflog5.jpg)

---
  
## reflog를 사용하여 삭제된 커밋을 복구

- `git reflog` : 삭제된 커밋 포함 모든 커밋로그 내용 조회
![reflog6.jpg](https://yunsikus.github.io/assets/img/post_img/reflog6.jpg)

- 되돌리고 싶은 커밋로그의 해시값을 찾아 리셋해주면 됨
  - git reset --hard 커밋로그 해시값
  - 위 사진에서의 해시값은 `709e0e0`임

- `git log`로 복구된 커밋 확인
![reflog7.jpg](https://yunsikus.github.io/assets/img/post_img/reflog7.jpg)

## 출처

인프런 - 모든 개발자의 실무를 위한 올인원 기본기 클래스